# learn-claude-code 项目开发宪法 (通用核心版)

**Version: 2.0, Ratified: 2026-01-23**

本文件定义了本项目不可动摇的核心开发原则。所有代码修改必须严格遵守这些原则。
本宪法适用于本项目下的所有技术栈（Go, Python, Frontend, Ops 等）。特定语言的实施细则请参考 [附录](#附录-appendices)。

---

## 第一条：简单性原则 (Simplicity First)

**核心：** "少即是多" (Less is More)。绝不进行不必要的抽象，绝不引入非必需的依赖。

- **1.1 (YAGNI):** 只实现明确要求的功能，不推测未来需求。
- **1.2 (最小依赖):** 优先使用语言标准库或成熟的社区标准库。引入新依赖需经过严格评估。
- **1.3 (反过度工程):** 简单的函数和数据结构优于复杂的抽象。避免过度设计。

---

## 第二条：测试质量原则 (Test Quality) - 不可协商

**核心：** 所有新功能或 Bug 修复，必须有测试覆盖。

- **2.1 (测试策略):** 依据复杂度分层：复杂业务逻辑坚持测试先行；简单逻辑可在实现后补充测试。
- **2.2 (测试覆盖):** 测试必须覆盖正常路径、异常路径和边界条件。
- **2.3 (可测性):** 代码设计必须易于测试（使用依赖注入等技术）。

---

## 第三条：明确性原则 (Clarity and Explicitness) - 不可协商

**核心：** 代码的首要目的是让人类易于理解，其次才是让机器执行。

- **3.1 (错误处理):** **不可协商**：所有错误必须显式处理，绝不允许静默失败。
- **3.2 (显式依赖):** 不允许使用全局隐式状态。所有依赖必须显式定义和传递。
- **3.3 (自解释):** 命名应当自解释。注释解释"为什么" (Why)，而不是"是什么" (What)。

---

## 第四条：设计原则 (Design Principles)

**核心：** 遵循 SOLID 原则，确保系统的高内聚、低耦合与可扩展性。

- **4.1 (单一职责):** 每个模块、类、函数只做好一件事 (Single Responsibility)。
- **4.2 (接口隔离):** 定义小的、目标明确的接口。
- **4.3 (依赖倒置):** 依赖于抽象而非具体实现。
- **4.4 (开闭原则):** 对扩展开放，对修改关闭。

---

## 第五条：修改与结构原则 (Modification and Structure)

**核心：** 保持变更的最小化，并严格控制代码规模以保障可维护性。

- **5.1 (最小化修改):** 仅修改必要的部分，避免无关的变动，降低回归风险。
- **5.2 (规模限制):** 遵守各语言附录中的文件和函数行数限制（默认建议：文件 < 300 行，函数 < 50 行）。
- **5.3 (代码演进):** 直接删除旧代码，严禁保留注释掉的废弃代码。

---

## 第六条：文案排版原则 (Copywriting & Typography)

**核心：** 统一多语言环境下的文案排版，提升文档专业度。

- **6.1 (中西文间隔):** 中英文之间、中文与数字之间必须增加空格。
- **6.2 (标点使用):** 中文语境使用全角标点，英文整句使用半角标点。
- **6.3 (专有名词):** 必须使用官方定义的正确大小写（如 GitHub, iPhone）。

---

## 第七条：持续改进原则 (Continuous Improvement)

**核心：** 建立从错误中学习的闭环机制。

- **7.1 (经验沉淀):** 修复重要 Bug 后，必须总结根本原因，并考虑更新宪法或最佳实践文档。

---

## 第八条：计划先行原则 (Planning First) - 不可协商

**核心：** 谋定而后动。

- **8.1 (强制计划):** 编码前必须制定 Plan。
- **8.2 (用户确认):** Plan 必须包含目标、步骤、验证方法，并经过确认。
- **8.3 (标准流程):** 研究 (Research) → 计划 (Plan) → 实现 (Implement) → 验证 (Verify)。

---

## 第九条：实证原则 (Evidence-Based Principle)

**核心：** 事实胜于假设 (Evidence > Assumptions)。

- **9.1 (验证驱动):** 技术决策必须基于测试结果或监控数据。
- **9.2 (来源验证):** 引用第三方库或文档时，必须验证其可信度。

---

## 第十条：交付标准原则 (Delivery Standards)

**核心：** 始于计划，终于完成。

- **10.1 (完成度):** 交付的代码必须是生产就绪的。严禁遗留 `TODO`。
- **10.2 (环境卫生):** 操作结束后必须清理临时文件。
- **10.3 (分支规范):** 严禁直接在主分支 (`main`/`master`) 工作。

---

## 第十一条：安全与隐私原则 (Security & Privacy First) - 新增

**核心：** 安全不是附加功能，是基础属性。

- **11.1 (最小权限):** 组件和账户仅应拥有执行其功能所需的最小权限。
- **11.2 (输入验证):** 永远不要信任外部输入。必须在边界处对所有输入进行验证和清洗。
- **11.3 (数据隐私):** 严禁在日志、错误信息或测试数据中泄露敏感信息 (PII, Credentials)。
- **11.4 (依赖安全):** 定期检查并修复依赖库的安全漏洞。

---

## 治理 (Governance)

本宪法具有最高优先级。所有代码修改在实施前，都必须进行"合宪性审查"。

### 附录 (Appendices)
- [Go 语言实施细则](docs/constitution/go_annex.md)
- (待添加: Python 实施细则)
- (待添加: 前端实施细则)

---

## 变更日志 (Changelog)

| Version | Date       | 变更说明                                                     |
| ------- | ---------- | ------------------------------------------------------------ |
| 2.0     | 2026-01-23 | **重大重构**：拆分为通用核心宪法与技术附录；新增第十一条 (安全与隐私) |
| 1.7     | 2026-01-23 | 新增第十条：交付标准原则；修订第二条 (测试诚信)              |
| 1.6     | 2026-01-23 | 新增第九条：实证原则；扩展第一/四条 (KISS/SOLID)             |
| 1.5     | 2026-01-23 | 新增第八条：计划先行原则；修订第二/五条 (测试策略/代码演进)  |
